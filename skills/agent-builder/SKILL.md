---
name: agent-builder
description: description: 设计和构建任意领域的 AI Agent。适用于以下场景：(1) 用户要求"创建一个 agent"、"构建一个助手"或"设计一个 AI 系统"； (2) 想要了解 agent 架构、agentic 模式或自主 AI； (3) 需要帮助处理能力、子 agent、规划或 skill 机制； (4) 询问 Claude Code、Cursor 或类似 agent 的内部原理； (5) 想要为业务、研究、创意或运营任务构建 agent； 关键词：agent、助手、自主、工作流、工具使用、多步骤、编排
---

# Agent 构建器

为任意领域构建 AI agent——客户服务、研究、运营、创意工作或专业业务流程。

## 核心理念

> **模型已经知道如何成为 agent。你的工作是不要妨碍它。**

Agent 不是复杂的工程。它是一个简单的循环，邀请模型采取行动：

```
循环：
  模型看到：上下文 + 可用能力
  模型决定：行动或响应
  如果行动：执行能力，添加结果，继续
  如果响应：返回给用户
```

**就这样。** 魔法不在代码里——在模型里。你的代码只是提供机会。

## 三大要素

### 1. 能力（它能做什么？）

Agent 可以执行的原子动作：搜索、读取、创建、发送、查询、修改。

**设计原则**：从 3-5 个能力开始。只有当 agent 因为缺少某个能力而持续失败时，才添加更多。

### 2. 知识（它知道什么？）

按需注入的领域专业知识：政策、工作流、最佳实践、模式。

**设计原则**：让知识可用，而不是强制。在相关时加载，而不是预先加载。

### 3. 上下文（发生了什么？）

对话历史——将各个动作连接成连贯行为的线索。

**设计原则**：上下文是宝贵的。隔离嘈杂的子任务。截断冗长的输出。保护清晰度。

## Agent 设计思维

在构建之前，理解：

- **目的**：这个 agent 应该完成什么？
- **领域**：它在什么世界中运作？（客户服务、研究、运营、创意...）
- **能力**：哪 3-5 个动作是必需的？
- **知识**：它需要访问什么专业知识？
- **信任**：你可以把什么决策委托给模型？

**关键**：信任模型。不要过度工程。不要预先指定工作流。给它能力，让它推理。

## 渐进式复杂度

从简单开始。只有当实际使用揭示需求时才添加复杂度：

| 级别 | 添加什么 | 何时添加 |
|------|----------|----------|
| 基础 | 3-5 个能力 | 总是从这里开始 |
| 规划 | 进度跟踪 | 多步骤任务失去连贯性 |
| 子 Agent | 隔离的子 agent | 探索污染上下文 |
| Skills | 按需知识 | 需要领域专业知识 |

**大多数 agent 永远不需要超过第 2 级。**

## 领域示例

**业务**：CRM 查询、邮件、日历、审批
**研究**：数据库搜索、文档分析、引用
**运营**：监控、工单、通知、升级
**创意**：资产生成、编辑、协作、审查

模式是通用的。只有能力会变化。

## 关键原则

1. **模型就是 agent**——代码只是运行循环
2. **能力赋能**——它能做什么
3. **知识指导**——它知道如何做什么
4. **约束聚焦**——限制创造清晰
5. **信任解放**——让模型推理
6. **迭代揭示**——从最小开始，从使用中演进

## 反模式

| 模式 | 问题 | 解决方案 |
|------|------|----------|
| 过度工程 | 需求之前的复杂性 | 从简单开始 |
| 太多能力 | 模型困惑 | 开始时 3-5 个 |
| 僵化工作流 | 无法适应 | 让模型决定 |
| 预加载知识 | 上下文膨胀 | 按需加载 |
| 微观管理 | 削弱智能 | 信任模型 |

## 资源

**理念与理论**：
- `references/agent-philosophy.md` - 深入探讨为什么 agent 有效

**实现**：
- `references/minimal-agent.py` - 完整的工作 agent（约 80 行）
- `references/tool-templates.py` - 能力定义
- `references/subagent-pattern.py` - 上下文隔离

**脚手架**：
- `scripts/init_agent.py` - 生成新的 agent 项目

## Agent 心态

**从**："我如何让系统做 X？"
**到**："我如何让模型能够做 X？"

**从**："这个任务的工作流是什么？"
**到**："什么能力有助于完成这个？"

最好的 agent 代码几乎是无聊的。简单的循环。清晰的能力。干净的上下文。魔法不在代码里。

**给模型能力和知识。信任它来解决剩下的问题。**
